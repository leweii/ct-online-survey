# è®¾è®¡æ–‡æ¡£: å¢å¼ºé—®å·å¹³å°

## 1. AI æ¨¡å‹é…ç½®

### æ¨¡å‹å±‚çº§
```typescript
// src/lib/ai.ts
import { google } from "@ai-sdk/google";

// Flash æ¨¡å‹ - ç”¨äº Responder å’Œ Analyticsï¼ˆå¿«é€Ÿå“åº”ï¼‰
export const geminiFlash = google("gemini-2.0-flash");

// Pro æ¨¡å‹ - ç”¨äº Creator ç”Ÿæˆä¸“ä¸šé—®å·ï¼ˆé«˜è´¨é‡è¾“å‡ºï¼‰
export const geminiPro = google("gemini-2.5-pro");
```

### æ¨¡å‹ä½¿ç”¨åœºæ™¯
| åœºæ™¯ | æ¨¡å‹ | åŸå›  |
|------|------|------|
| åˆ›å»ºé—®å· | gemini-2.5-pro | éœ€è¦æ·±åº¦æ€è€ƒï¼Œç”Ÿæˆä¸“ä¸šé—®é¢˜ |
| å›ç­”é—®å· | gemini-2.0-flash | ç®€å•å¯¹è¯ï¼Œéœ€è¦å¿«é€Ÿå“åº” |
| æ•°æ®åˆ†æ | gemini-2.0-flash | æ•°æ®å¤„ç†ï¼Œéœ€è¦å¿«é€Ÿå“åº” |

### Creator Prompt å¢å¼º
- å¢åŠ é—®å·è®¾è®¡æœ€ä½³å®è·µæŒ‡å¯¼
- è¦æ±‚è€ƒè™‘é—®é¢˜é¡ºåºã€é€»è¾‘è·³è½¬
- ç”Ÿæˆæ›´ä¸“ä¸šçš„é€‰é¡¹è®¾è®¡

## 2. ä¸­æ–‡ç•Œé¢æ–‡æœ¬æ˜ å°„

### ä¸»è¦æ–‡æœ¬
| è‹±æ–‡ | ä¸­æ–‡ |
|------|------|
| Survey Bot | é—®å·åŠ©æ‰‹ |
| Create Survey | åˆ›å»ºé—®å· |
| Take Survey | å¡«å†™é—®å· |
| Start Creating | å¼€å§‹åˆ›å»º |
| View Dashboard | æŸ¥çœ‹ä»ªè¡¨ç›˜ |
| Submit Survey | æäº¤é—®å· |
| Form Mode | è¡¨å•æ¨¡å¼ |
| Chat Mode | å¯¹è¯æ¨¡å¼ |

## 3. éƒ¨åˆ†æäº¤è®¾è®¡

### æ•°æ®åº“çŠ¶æ€
```typescript
type ResponseStatus = "in_progress" | "partial" | "completed";
```

### UI æµç¨‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é—®å·æ ‡é¢˜              [3/8]     â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  37%       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  Q1: âœ“ å·²å›ç­”                   â”‚
â”‚  Q2: âœ“ å·²å›ç­”                   â”‚
â”‚  Q3: âœ“ å·²å›ç­”                   â”‚
â”‚  Q4: (å½“å‰é—®é¢˜)                 â”‚
â”‚  Q5-Q8: æœªå›ç­”                  â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æå‰æäº¤]     [ç»§ç»­å¡«å†™]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æå‰æäº¤ç¡®è®¤
- å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
- æ˜¾ç¤ºå·²å›ç­”/æœªå›ç­”æ•°é‡
- æ˜ç¡®å‘ŠçŸ¥ä¸å¯ä¿®æ”¹

## 4. æ•°æ®åˆ†æèŠå¤©é¡µé¢

### é¡µé¢ç»“æ„
```
/dashboard/chat?code=xxx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®åˆ†æåŠ©æ‰‹                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ                 â”‚ â”‚
â”‚ â”‚ â€¢ é—®å·æ€»æ•°: 5               â”‚ â”‚
â”‚ â”‚ â€¢ å›å¤æ€»æ•°: 127             â”‚ â”‚
â”‚ â”‚ â€¢ å®Œæˆç‡: 89%               â”‚ â”‚
â”‚ â”‚ â€¢ ä»Šæ—¥æ–°å¢: 12              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚ ğŸ¤– æ‚¨å¥½ï¼æˆ‘å¯ä»¥å¸®æ‚¨åˆ†æé—®å·æ•°æ®ã€‚â”‚
â”‚    æ‚¨å¯ä»¥é—®æˆ‘ï¼š                  â”‚
â”‚    â€¢ "å“ªä¸ªé—®å·å›å¤æœ€å¤šï¼Ÿ"        â”‚
â”‚    â€¢ "ç”¨æˆ·å¯¹Q3çš„å›ç­”åˆ†å¸ƒå¦‚ä½•ï¼Ÿ"  â”‚
â”‚    â€¢ "æœ€è¿‘ä¸€å‘¨çš„è¶‹åŠ¿å¦‚ä½•ï¼Ÿ"      â”‚
â”‚                                 â”‚
â”‚                 [è¾“å…¥æ‚¨çš„é—®é¢˜...] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API è®¾è®¡
```typescript
// POST /api/chat/analytics
interface AnalyticsRequest {
  messages: Message[];
  creatorCode: string;
}

interface AnalyticsResponse {
  text: string;
  stats?: {
    type: "summary" | "chart" | "table";
    data: unknown;
  };
}
```

### AI Prompt
```
ä½ æ˜¯ä¸€ä¸ªé—®å·æ•°æ®åˆ†æåŠ©æ‰‹ã€‚

å¯ç”¨æ•°æ®ï¼š
- é—®å·åˆ—è¡¨ï¼ˆæ ‡é¢˜ã€çŠ¶æ€ã€åˆ›å»ºæ—¶é—´ï¼‰
- å›å¤ç»Ÿè®¡ï¼ˆæ¯ä¸ªé—®å·çš„å›å¤æ•°ã€å®Œæˆç‡ï¼‰
- ç­”æ¡ˆè¯¦æƒ…ï¼ˆæ¯ä¸ªé—®é¢˜çš„å›ç­”åˆ†å¸ƒï¼‰

ç”¨æˆ·é—®é¢˜ç±»å‹ï¼š
1. æ¦‚è§ˆç»Ÿè®¡ - å›å¤æ€»æ•°ã€å®Œæˆç‡ç­‰
2. é—®å·å¯¹æ¯” - å“ªä¸ªé—®å·è¡¨ç°æœ€å¥½
3. é—®é¢˜åˆ†æ - æŸä¸ªé—®é¢˜çš„å›ç­”åˆ†å¸ƒ
4. è¶‹åŠ¿åˆ†æ - æ—¶é—´ç»´åº¦çš„å˜åŒ–

å›ç­”æ—¶ä½¿ç”¨ä¸­æ–‡ï¼Œæ•°æ®è¦å‡†ç¡®ã€‚
```

## 5. æ–‡ä»¶å˜æ›´æ¸…å•

### æ–°å¢æ–‡ä»¶
- `src/app/dashboard/chat/page.tsx` - åˆ†æèŠå¤©é¡µé¢
- `src/app/api/chat/analytics/route.ts` - åˆ†æ API

### ä¿®æ”¹æ–‡ä»¶
- `src/lib/ai.ts` - æ·»åŠ  thinking æ¨¡å‹
- `src/app/api/chat/creator/route.ts` - ä½¿ç”¨ thinking æ¨¡å‹
- `src/app/page.tsx` - ä¸­æ–‡æ–‡æœ¬
- `src/app/create/page.tsx` - ä¸­æ–‡æ–‡æœ¬
- `src/app/dashboard/DashboardContent.tsx` - ä¸­æ–‡æ–‡æœ¬ + åˆ†æå…¥å£
- `src/components/FormResponse.tsx` - éƒ¨åˆ†æäº¤æŒ‰é’®
- `src/components/ResponseModeSelector.tsx` - ä¸­æ–‡æ–‡æœ¬
- `src/app/survey/[id]/page.tsx` - éƒ¨åˆ†æäº¤é€»è¾‘
- `src/types/database.ts` - æ·»åŠ  partial çŠ¶æ€
